<!doctype html><html><head>
<meta charset="utf-8"/><title>Orders</title>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<style>
 body{font-family:system-ui,Arial;max-width:1100px;margin:24px auto;padding:16px}
 table{border-collapse:collapse;width:100%}
 th,td{border:1px solid #eee;padding:8px;text-align:left;vertical-align:top}
 .paid{color:#0a0;font-weight:600}.pending{color:#a60;font-weight:600}
</style></head><body>
<h2>Orders</h2>
<p><a href="/api/products" target="_blank">Products JSON</a> • <a href="/test.html" target="_blank">Test Checkout</a></p>
<table id="tbl"><thead>
<tr><th>Created</th><th>Status</th><th>Order ID</th><th>Razorpay</th><th>Items</th><th>Address</th><th>Total (₹)</th></tr>
</thead><tbody></tbody></table>
<script>
(async function(){
  const r=await fetch("/api/orders"); const data=await r.json();
  const tb=document.querySelector("#tbl tbody");
  tb.innerHTML=data.map(o=>`
    <tr>
      <td>${new Date(o.createdAt).toLocaleString()}</td>
      <td class="${o.status}">${o.status}</td>
      <td>${o._id}</td>
      <td>order: ${o.rp_order_id||"-"}<br/>payment: ${o.rp_payment_id||"-"}</td>
      <td>${(o.items||[]).map(i=>`${i.title} × ${i.qty} (₹${(i.pricePaise/100).toFixed(2)})`).join("<br/>")}</td>
      <td>
        ${o.address?.name||""}<br/>${o.address?.phone||""}<br/>
        ${o.address?.line1||""} ${o.address?.line2||""}<br/>
        ${o.address?.city||""}, ${o.address?.state||""} ${o.address?.pincode||""}
      </td>
      <td>₹${(o.subtotalPaise/100).toFixed(2)}</td>
    </tr>`).join("");
})();
</script>
</body></html>
